<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bus Tracking Dashboard</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    rel="stylesheet"
    />
    <style>
        /* Global Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        
        .sidebar ul {
            list-style: none;
            padding: 0;
        }

        .sidebar ul li {
            margin: 10px 0;
        }

        .sidebar ul li a {
            color: white;
            padding: 10px 20px;
            display: block;
            text-decoration: none;
            border-radius: 4px;
            transition: 0.3s;
        }

        .sidebar ul li a:hover {
            background-color: #e55c00;
        }

        .sidebar ul li a.active {
            background-color: white;
            color: #ff6600; /* Orange Text */
            font-weight: bold;
        }

        /* Top Bar Styling */
        .topbar {
            width: 100%;
            background-color: #ff6600; /* Orange */
            color: white;
            display: flex;
            justify-content: space-between;
            padding: 1px 5px;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 999;
        }

        .topbar .logo {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .topbar nav {
            display: none; /* Removed top nav links */
        }

        .topbar .icons {
            display: flex;
            gap: 20px;
        }

        .topbar .icon {
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Sidebar Styling */
        .sidebar {
            width: 200px;
            background-color: #ff6600; /* Orange */
            color: white;
            position: fixed;
            top: 60px; /* To avoid overlap with topbar */
            left: 0;
            bottom: 0;
            padding-top: 20px;
            transition: width 0.3s ease;
            overflow-y: auto; /* Added scrollability */
            height: calc(100% - 60px); /* Adjust to avoid overlap with topbar */
        }

        .sidebar a {
            color: white;
            text-decoration: none;
            display: block;
            padding: 10px 20px;
            margin: 10px 0;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .sidebar a:hover, .sidebar a.active {
            background-color: #e55c00; /* Darker orange */
            color: white;
        }

        /* Content Area */
        .content {
            margin-left: 250px;
            padding: 20px;
            margin-top: 60px; /* Space for topbar */
            flex: 1;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* For responsiveness */
        @media screen and (max-width: 768px) {
            .topbar {
                flex-direction: column;
                align-items: center;
            }

            .sidebar {
                width: 100%;
                top: 60px;
                left: 0;
                position: fixed;
                padding-top: 10px;
                height: calc(100% - 60px);
                justify-content: space-between; /* Buttons kindhana move cheyyadaniki */
            }

            .content {
                margin-left: 0;
            }
        }
        /* Main Content Styling */
        .content {
            margin-left: 250px; /* Push content right to avoid overlay */
            padding: 20px;
            background-color: #f4f4f4;
            height: 100vh;
        }

        /* Header Styling */
        .content h1 {
            color: #333;
            margin-top: 20px;
        }
        body {
            font-family: Arial, sans-serif;
        }
        .content {
            margin-left: 210px;
            padding: 20px;
        }
        .header {
            background-color: #f96332;
            color: white;
            padding: 10px;
            font-size: 15px;
            margin-bottom: 14px;
        }
        .btn-add {
            background-color: #f96332;
            color: white;
            margin-bottom: 14px;
        }
        .btn-save {
            background-color: green;
            color: white;
        }
        .btn-cancel {
            background-color: red;
            color: white;
        }
        .btn-edit, .btn-view, .btn-delete {
            margin: 0 5px;
        }
        .btn-sm {
            padding: 4px 8px;
            font-size: 8px;
        }
        .table th, .table td {
            vertical-align: middle;
        }
    </style>
</head>
<body>

    <!-- Top Bar -->
    <div class="topbar">
        <div class="logo" >Smart Transit</div>
        <div class="icons">
            <span class="icon"><i class="bi bi-bell"></i><!-- Notification Icon --></span>
         <!--   <span class="icon" onclick="toggleBrightness()"><i class="bi bi-brightness-high"></i> Brightness icon </span> -->
         <span class="icon"><i class="bi bi-person-circle"></i><!-- profile Icon --></span>
            
        </div>
    </div>
    

    <!-- Sidebar -->
    <div class="sidebar">
        <ul>
        <li><a href="#" onclick="showSection('busDetails', this)"><i class="bi bi-bus-front"></i>  Bus Details</a></li>
        <li><a href="#" onclick="showSection('driverDetails', this)"><i class="bi bi-person"></i>  Driver Details</a></li>
        <li><a href="#" onclick="showSection('busRoutes', this)"><i class="bi bi-map"></i>  Bus Routes</a></li>
        <li><a href="#" onclick="showSection('studentDetails', this)"><i class="bi bi-person-badge"></i> Student Details</a></li>
        <li><a href="#" onclick="showSection('facultyDetails', this)"><i class="bi bi-people"></i> Faculty Details</a></li>
        <li><a href="#" onclick="showSection('trackBus', this)"><i class="bi bi-geo-alt"></i> Track Bus</a></li>
        <li><a href="#" onclick="showSection('settings', this)"><i class="bi bi-gear"></i> Settings</a></li>
        <li><a href="#" onclick="showSection('seatPlan', this)"><i class="bi bi-grid-3x3-gap"></i> Seat Plan</a></li>
        <li><a href="#" onclick="showSection('busTiming', this)"><i class="bi bi-clock"></i> Bus Timing</a></li>
        <li><a href="#" onclick="showSection('logout', this)"><i class="bi bi-box-arrow-right"></i> Logout</a></li>
    </ul>
    </div>

<!-- Main Content -->
<div class="content">

        <!--Bus Details-->
        <div id="busDetails" class="section">
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Bus Details</title>
                <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
                <link
                href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
                rel="stylesheet"
                />
                <style>
                    * {
                        margin: 0;
                        padding: 0;
                        box-sizing: border-box;
                        font-family: Arial, sans-serif;
                    }
            
                    /* Sidebar Styling */
                    .sidebar {
                        background-color: #ff6600; /* Orange color */
                        width: 200px;
                        height: 100vh; /* Full viewport height */
                        position: fixed; /* Sticks to the side */
                        top: 0;
                        left: 0;
                        color: #fff;
                        padding: 20px 0;
                        overflow-y: auto; /* Scrollable if needed */
                    }
            
                    /* Sidebar Heading */
                    .sidebar h2 {
                        text-align: center;
                        font-size: 22px;
                        margin-bottom: 20px;
                        text-transform: uppercase;
                        color: #fff;
                        font-weight: bold;
                    }
            
                    /* Sidebar Menu */
                    .sidebar ul {
                        list-style: none;
                        padding: 0;
                    }
            
                    .sidebar ul li {
                        margin: 15px 0;
                    }
            
                    .sidebar ul li a {
                        display: block;
                        text-decoration: none;
                        color: #fff;
                        padding: 10px 20px;
                        font-size: 16px;
                        border-radius: 5px;
                        transition: background 0.3s;
                    }
            
                    .sidebar ul li a:hover,
                    .sidebar ul li.active a {
                        background-color: #e55c00; /* Darker orange on hover/active */
                        color: #fff;
                    }
            
                    /* Main Content Styling */
                    .content {
                        margin-left: 250px; /* Push content right to avoid overlay */
                        padding: 20px;
                        background-color: #f4f4f4;
                        height: 100vh;
                    }
            
                    /* Header Styling */
                    .content h1 {
                        color: #333;
                        margin-top: 20px;
                    }
                    body {
                        font-family: Arial, sans-serif;
                    }
                    .content {
                        margin-left: 210px;
                        padding: 20px;
                    }
                    .header {
                        background-color: #f96332;
                        color: white;
                        padding: 10px;
                        font-size: 15px;
                        margin-bottom: 14px;
                    }
                    .btn-add {
                        background-color: #f96332;
                        color: white;
                        margin-bottom: 14px;
                    }
                    .btn-save {
                        background-color: green;
                        color: white;
                    }
                    .btn-cancel {
                        background-color: red;
                        color: white;
                    }
                    .btn-edit, .btn-view, .btn-delete {
                        margin: 0 5px;
                    }
                    .btn-sm {
                        padding: 4px 8px;
                        font-size: 8px;
                    }
                    .table th, .table td {
                        vertical-align: middle;
                    }
                </style>
            </head>
            <body>
                    <div class="header">Bus Details</div>
                    <div class="table-container">
                        <button class="btn btn-add" id="addBusBtn">+ Add Bus</button>
                        <input type="text" id="searchBar" class="form-control" placeholder="Search by Bus Number or Route">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>Serial No.</th>
                                    <th>Bus Number</th>
                                    <th>Template Number</th>
                                    <th>Bus Route</th>
                                    <th>Driver Photo</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="busTableBody"></tbody>
                        </table>
                    </div>
            
                <!-- Add/Edit Modal -->
                <div class="modal" tabindex="-1" role="dialog" id="busModal">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="modalTitle">Edit Bus</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <form id="busForm" novalidate>
                                    <div class="form-group">
                                        <label for="busNumber">Bus Number</label>
                                        <input type="number" class="form-control" id="busNumber" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="templateNumber">Template Number</label>
                                        <input type="text" class="form-control" id="templateNumber" required>
                                    </div>
                                    <!--<div class="form-group">
                                        <label for="busRoute">Bus Route</label>
                                        <input type="text" class="form-control" id="busRoute" required pattern="[A-Za-z\s]+" title="Enter alphabets only">
                                    </div> -->
                                    <div class="form-group">
                                        <label for="busRoute">Bus Route</label>
                                        <select class="form-control" id="busRoute" required>
                                            <option value="" disabled selected>Select a Bus Route</option>
                                            <option value="ATP SRINAGAR COLONY">ATP SRINAGAR COLONY</option>
                                            <option value="Route B">ATP HLC COLONY</option>
                                            <option value="ATP HLC COLONY">ATP BHAIRAVA NAGAR </option>
                                            <option value="ATP OLD TOWN">ATP OLD TOWN</option>
                                            <option value="ATP RAZAK FN HALL">ATP RAZAK FN HALL</option>
                                            <option value="ATP TAPOVANAM">ATP TAPOVANAM</option>
                                            <option value="ATP CBN KOTTALU">ATP CBN KOTTALU</option>
                                            <option value="ATP CHINMAY NAGAR">ATP CHINMAY NAGAR</option>
                                            <option value="ATP SHANTI NAGAR BOARD">ATP SHANTI NAGAR BOARD</option>
                                            <option value="ATP DMM KALAJYOTHI">ATP DMM KALAJYOTHI</option>
                                            <option value="ATP LECTURES COLONY">ATP LECTURES COLONY</option>
                                            <option value="ATP DMM SAIBABA GUDI CIRCLE">ATP DMM SAIBABA GUDI CIRCLE</option>
                                            <option value="ATP SRIKANTAM CIRCLE">ATP SRIKANTAM CIRCLE</option>
                                            <option value="ATP NADIMIVANKA">ATP NADIMIVANKA</option>
                                            <option value="ATP TOWERCLOCK">ATP TOWERCLOCK</option>
                                            <option value="TADIPATRI">TADIPATRI</option>
                                            <option value="DHARMAVARAM">DHARMAVARAM</option>
                                            <option value="PAMIDI">PAMIDI</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="driverPhoto">Driver Photo</label>
                                        <input type="file" class="form-control" id="driverPhoto" accept="image/*" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="status">Status</label>
                                        <select class="form-control" id="status" required>
                                            <option value="" disabled selected>Select Status</option>
                                            <option value="Departed">Departed</option>
                                            <option value="Arrived">Arrived</option>
                                            <option value="Stopped">Stopped</option>
                                        </select>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-save" id="saveBusBtn">Save</button>
                                <button type="button" class="btn btn-cancel" data-dismiss="modal">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            
                <!-- View Modal -->
                <div class="modal" tabindex="-1" role="dialog" id="viewModal">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Bus Details</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body" id="viewContent"></div>
                        </div>
                    </div>
                </div>
            
                <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
                <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
                <script>
                    let busData = JSON.parse(localStorage.getItem('busData')) || [];
                    let editMode = false, editIndex = -1;
            
                    function renderBusTable(data) {
                        data.sort((a, b) => a.busNumber - b.busNumber);
                        const tableBody = document.getElementById('busTableBody');
                        tableBody.innerHTML = '';
                        data.forEach((bus, index) => {
                            const row = 
                                `<tr>
                                    <td>${index + 1}</td>
                                    <td>${bus.busNumber}</td>
                                    <td>${bus.templateNumber}</td>
                                    <td>${bus.busRoute}</td>
                                    <td><a href="${bus.photo}" target="_blank">${bus.photoName}</a></td>
                                    <td>${bus.status}</td>
                                    <td>
                                        <button class="btn btn-primary btn-sm btn-edit" onclick="editBus(${index})">Edit</button>
                                        <button class="btn btn-info btn-sm btn-view" onclick="viewBus(${index})">View</button>
                                        <button class="btn btn-danger btn-sm btn-delete" onclick="deleteBus(${index})">Delete</button>
                                    </td>
                                </tr>`;
                            tableBody.insertAdjacentHTML('beforeend', row);
                        });
                    }
            
                    function saveToLocalStorage() {
                        localStorage.setItem('busData', JSON.stringify(busData));
                    }
            
                    document.getElementById('addBusBtn').addEventListener('click', () => {
                        editMode = false; editIndex = -1;
                        document.getElementById('busForm').reset();
                        $('#busModal').modal('show');
                    });
            
                    document.getElementById('saveBusBtn').addEventListener('click', () => {
                        const form = document.getElementById('busForm');
                        if (!form.checkValidity()) {
                            form.reportValidity();
                            return;
                        }
            
                        const newBusNumber = +document.getElementById('busNumber').value.trim();
                        const newTemplateNumber = document.getElementById('templateNumber').value.trim();
                        const duplicateBus = busData.some((bus, index) => 
                            (bus.busNumber === newBusNumber || bus.templateNumber === newTemplateNumber) && index !== editIndex
                        );
            
                        if (duplicateBus) {
                            alert('Bus number or template number already exists. Please use unique values !!!');
                            return;
                        }
            
                        const newBus = {
                            busNumber: +document.getElementById('busNumber').value.trim(),
                            templateNumber: document.getElementById('templateNumber').value.trim(),
                            busRoute: document.getElementById('busRoute').value.trim(),
                            photo: URL.createObjectURL(document.getElementById('driverPhoto').files[0]),
                            photoName: document.getElementById('driverPhoto').files[0].name,
                            status: document.getElementById('status').value // Capture selected status value correctly
                        };
            
                        if (editMode) busData[editIndex] = newBus;
                        else busData.push(newBus);
            
                        saveToLocalStorage();
                        renderBusTable(busData);
                        $('#busModal').modal('hide');
                    });
            
                    function editBus(index) {
                        const bus = busData[index];
                        document.getElementById('busNumber').value = bus.busNumber;
                        document.getElementById('templateNumber').value = bus.templateNumber;
                        document.getElementById('busRoute').value = bus.busRoute;
                        document.getElementById('status').value = bus.status; // Set the status value correctly in edit mode
                        editMode = true; 
                        editIndex = index;
                        $('#busModal').modal('show');
                    }
            
                    function viewBus(index) {
                        const bus = busData[index];
                        const content = 
                            `<p><strong>Bus Number:</strong> ${bus.busNumber}</p>
                            <p><strong>Template Number:</strong> ${bus.templateNumber}</p>
                            <p><strong>Bus Route:</strong> ${bus.busRoute}</p>
                            <p><strong>Status:</strong> ${bus.status}</p>
                            <img src="${bus.photo}" alt="Driver Photo" style="width:50%">`;
                        document.getElementById('viewContent').innerHTML = content;
                        $('#viewModal').modal('show');
                    }
            
                    function deleteBus(index) {
                        if (confirm('Are you sure you want to delete ?')) {
                            busData.splice(index, 1);
                            saveToLocalStorage();
                            renderBusTable(busData);
                        }
                    }
            
                    document.getElementById('searchBar').addEventListener('input', () => {
                        const query = document.getElementById('searchBar').value.toLowerCase();
                        const filteredData = busData.filter(bus => 
                            bus.busNumber.toString().includes(query) || bus.busRoute.toLowerCase().includes(query)
                        );
                        renderBusTable(filteredData);
                    });
            
                    document.addEventListener('DOMContentLoaded', () => {
                        renderBusTable(busData);
                    });
                </script>
            </body>
            </html>
            

        </div>
            


        <!--driver details-->
        <div id="driverDetails" class="section">
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Driver Details</title>
                <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
                <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet" />
                <style>
                    * {
                        margin: 0;
                        padding: 0;
                        box-sizing: border-box;
                        font-family: Arial, sans-serif;
                    }
            
                    .content {
                        padding: 20px;
                        background-color: #f4f4f4;
                        height: 100vh;
                    }
                    .header {
                        background-color: #f96332;
                        color: white;
                        padding: 10px;
                        margin-bottom: 15px;
                    }
                    .btn-add {
                        background-color: #f96332;
                        color: white;
                        margin-bottom: 15px;
                    }
                    .btn-save {
                        background-color: green;
                        color: white;
                    }
                    .btn-cancel {
                        background-color: red;
                        color: white;
                    }
                    .btn-sm {
                        padding: 4px 8px;
                        font-size: 12px;
                    }
                </style>
            </head>
            <body>
                <div class="header">Driver Details</div>
                
                    <button class="btn btn-add" id="addDriverBtn">+ Add Driver</button>
                    <input type="text" id="searchDriverBar" class="form-control mb-2" placeholder="Search by Bus Number or Route">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Serial No.</th>
                                <th>Driver Name</th>
                                <th>Driver Photo</th>
                                <th>Phone Number</th>
                                <th>Bus Number</th>
                                <th>Bus Route</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="driverTableBody"></tbody>
                    </table>
                
            
                <!-- Add/Edit Modal -->
                <div class="modal" id="driverModal" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Driver Details</h5>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <form id="driverForm">
                                    <div class="form-group">
                                        <label for="driverName">Driver Name</label>
                                        <input type="text" id="driverName" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="driverPhoto">Driver Photo</label>
                                        <input type="file" id="driverPhoto" class="form-control" accept="image/*">
                                    </div>
                                    <div class="form-group">
                                        <label for="driverPhoneNumber">Phone Number</label>
                                        <input type="text" id="driverPhoneNumber" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="driverBusNumber">Bus Number</label>
                                        <input type="text" id="driverBusNumber" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="driverBusRoute">Bus Route</label>
                                        <input type="text" id="driverBusRoute" class="form-control" required>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button class="btn btn-save" id="saveDriverBtn">Save</button>
                                <button class="btn btn-cancel" data-dismiss="modal">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            
                <!-- View Modal -->
                <div class="modal" id="viewDriverModal" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Driver Information</h5>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>
                            <div class="modal-body" id="viewDriverContent"></div>
                        </div>
                    </div>
                </div>
            
                <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
                <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
                <script>
                    let driverData = JSON.parse(localStorage.getItem('driverData')) || [];
                    let editDriverMode = false, editDriverIndex = -1;
            
                    function saveToDriverLocalStorage() {
                        localStorage.setItem('driverData', JSON.stringify(driverData));
                    }
            
                    function renderTable(filteredData = driverData) {
                        const tableBody = document.getElementById('driverTableBody');
                        tableBody.innerHTML = '';
                        filteredData.forEach((driver, index) => {
                            const row = `
                                <tr>
                                    <td>${index + 1}</td>
                                    <td>${driver.name}</td>
                                    <td><a href="${driver.photo}" target="_blank">View Photo</a></td>
                                    <td>${driver.phoneNumber}</td>
                                    <td>${driver.busNumber}</td>
                                    <td>${driver.busRoute}</td>
                                    <td>
                                        <button class="btn btn-sm btn-primary" onclick="editDriver(${index})">Edit</button>
                                        <button class="btn btn-sm btn-info" onclick="viewDriver(${index})">View</button>
                                        <button class="btn btn-sm btn-danger" onclick="deleteDriver(${index})">Delete</button>
                                    </td>
                                </tr>`;
                            tableBody.insertAdjacentHTML('beforeend', row);
                        });
                    }
            
                    document.getElementById('addDriverBtn').addEventListener('click', () => {
                        editDriverMode = false;
                        editDriverIndex = -1;
                        document.getElementById('driverForm').reset();
                        $('#driverModal').modal('show');
                    });
            
                    document.getElementById('saveDriverBtn').addEventListener('click', () => {
                        const name = document.getElementById('driverName').value;
                        const photoFile = document.getElementById('driverPhoto').files[0];
                        const phoneNumber = document.getElementById('driverPhoneNumber').value;
                        const busNumber = document.getElementById('driverBusNumber').value;
                        const busRoute = document.getElementById('driverBusRoute').value;
            
                        // Check for duplicate driver details (except for the current driver being edited)
                        const duplicateDriver = driverData.find((driver, index) => {
                            return driver.busNumber === busNumber && index !== editDriverIndex;
                        });
            
                        if (duplicateDriver) {
                            alert("Details already exist for this bus number.");
                            return;
                        }
            
                        let photoUrl = editDriverMode ? driverData[editDriverIndex].photo : '';
            
                        if (photoFile) {
                            photoUrl = URL.createObjectURL(photoFile);
                        }
            
                        const driver = { name, photo: photoUrl, phoneNumber, busNumber, busRoute };
            
                        if (editDriverMode) {
                            driverData[editDriverIndex] = driver;
                        } else {
                            driverData.push(driver);
                        }
            
                        saveToDriverLocalStorage();
                        renderTable();
                        $('#driverModal').modal('hide');
                    });
            
                    function editDriver(index) {
                        const driver = driverData[index];
                        document.getElementById('driverName').value = driver.name;
                        document.getElementById('driverPhoneNumber').value = driver.phoneNumber;
                        document.getElementById('driverBusNumber').value = driver.busNumber;
                        document.getElementById('driverBusRoute').value = driver.busRoute;
            
                        editDriverMode = true;
                        editDriverIndex = index;
                        $('#driverModal').modal('show');
                    }
            
                    function viewDriver(index) {
                        const driver = driverData[index];
                        document.getElementById('viewDriverContent').innerHTML = `
                            <p><strong>Name:</strong> ${driver.name}</p>
                            <p><strong>Phone Number:</strong> ${driver.phoneNumber}</p>
                            <p><strong>Bus Number:</strong> ${driver.busNumber}</p>
                            <p><strong>Bus Route:</strong> ${driver.busRoute}</p>
                            <p><strong>Photo:</strong> <img src="${driver.photo}" alt="Driver Photo" style="max-width: 100%;"></p>
                        `;
                        $('#viewDriverModal').modal('show');
                    }
            
                    function deleteDriver(index) {
                        if (confirm("Are you sure you want to delete this driver?")) {
                            driverData.splice(index, 1);
                            saveToDriverLocalStorage();
                            renderTable();
                        }
                    }
            
                    document.getElementById('searchDriverBar').addEventListener('input', function () {
                        const searchQuery = this.value.toLowerCase();
                        const filteredData = driverData.filter(driver =>
                            driver.busNumber.toLowerCase().includes(searchQuery) || driver.busRoute.toLowerCase().includes(searchQuery)
                        );
                        renderTable(filteredData);
                    });
            
                    renderTable();
                </script>
            </body>
            </html>
            
        </div>
            
       

    
        <div id="busRoutes" class="section">
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Bus Routes</title>
                <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
                <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet" />
                <style>
                    * {
                        margin: 0;
                        padding: 0;
                        box-sizing: border-box;
                        font-family: Arial, sans-serif;
                    }
            
                    /* Main Content Styling */
                    .content {
                        margin-left: 50px; /* Adjusted to give proper left space */
                        padding: 20px;
                        background-color: #f4f4f4;
                        height: 100vh;
                    }
            
                    /* Header Styling */
                    .content h1 {
                        color: #333;
                        margin-top: 20px;
                    }
            
                    .header {
                        background-color: #f96332;
                        color: white;
                        padding: 10px;
                        font-size: 15px;
                        margin-bottom: 14px;
                    }
            
                    .btn-add {
                        background-color: #f96332;
                        color: white;
                        margin-bottom: 14px;
                    }
            
                    .btn-save {
                        background-color: green;
                        color: white;
                    }
            
                    .btn-cancel {
                        background-color: red;
                        color: white;
                    }
            
                    .btn-edit, .btn-delete {
                        margin: 0 5px;
                    }
            
                    .btn-sm {
                        padding: 4px 8px;
                        font-size: 8px;
                    }
            
                    .table th, .table td {
                        vertical-align: middle;
                    }
                </style>
            </head>
            <body>
                    <div class="header">Bus Routes</div>
                    <div class="table-container">
                        <button class="btn btn-add" id="addRouteBtn">+ Add Route</button>
                        <input type="text" id="searchRouteBar" class="form-control mb-4" placeholder="Search by Route Bus Number">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>Route Bus Number</th>
                                    <th>Starting Point</th>
                                    <th>Bus Route</th>
                                    <th>Driver Name</th>
                                    <th>Mobile Number</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="busRouteTableBody"></tbody>
                        </table>
                    </div>
            
                <!-- Add/Edit Modal -->
                <div class="modal" tabindex="-1" role="dialog" id="routeModal">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="modalTitle">Edit Bus Route</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <form id="routeForm" novalidate>
                                    <div class="form-group">
                                        <label for="routeBusNumber">Route Bus Number</label>
                                        <input type="text" class="form-control" id="routeBusNumber" required>
                                    </div>
            
                                    <div class="form-group">
                                        <label for="routeStartingPoint">Route Starting Point</label>
                                        <input type="text" class="form-control" id="routeStartingPoint" required>
                                    </div>
            
                                    <div class="form-group">
                                        <label for="routeDriverName">Driver Name</label>
                                        <input type="text" class="form-control" id="routeDriverName" required>
                                    </div>
            
                                    <div class="form-group">
                                        <label for="driverMobileNumber">Mobile Number</label>
                                        <input type="number" class="form-control" id="driverMobileNumber" required>
                                    </div>
            
                                    <div class="form-group">
                                        <label for="routeBusRoute">Bus Route</label>
                                        <input type="text" class="form-control" id="routeBusRoute" required>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-save" id="saveRouteBtn">Save</button>
                                <button type="button" class="btn btn-cancel" data-dismiss="modal">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            
                <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
                <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
                <script>
                    let busRouteData = JSON.parse(localStorage.getItem('busRouteData')) || [];
                    let editRouteMode = false, editRouteIndex = -1;
            
                    function renderBusRouteTable(data) {
                        data.sort((a, b) => a.routeBusNumber - b.routeBusNumber);
                        const tableBody = document.getElementById('busRouteTableBody');
                        tableBody.innerHTML = '';
                        data.forEach((route, index) => {
                            const row = 
                                `<tr>
                                    <td>${route.routeBusNumber}</td>
                                    <td>${route.routeStartingPoint}</td>
                                    <td>${route.routeBusRoute}</td>
                                    <td>${route.routeDriverName}</td>
                                    <td>${route.driverMobileNumber}</td>
                                    <td>
                                        <button class="btn btn-primary btn-sm btn-edit" onclick="editBusRoute(${index})">Edit</button>
                                        <button class="btn btn-danger btn-sm btn-delete" onclick="deleteBusRoute(${index})">Delete</button>
                                    </td>
                                </tr>`;
                            tableBody.insertAdjacentHTML('beforeend', row);
                        });
                    }
            
                    function saveToRouteLocalStorage() {
                        localStorage.setItem('busRouteData', JSON.stringify(busRouteData));
                    }
            
                    document.getElementById('addRouteBtn').addEventListener('click', () => {
                        editRouteMode = false; editRouteIndex = -1;
                        document.getElementById('routeForm').reset();
                        $('#routeModal').modal('show');
                    });
            
                    document.getElementById('saveRouteBtn').addEventListener('click', () => {
                        const form = document.getElementById('routeForm');
                        if (!form.checkValidity()) {
                            form.reportValidity();
                            return;
                        }
            
                        const newRouteBusNumber = document.getElementById('routeBusNumber').value.trim();
                        const duplicateRouteBus = busRouteData.some((route, index) => 
                            route.routeBusNumber === newRouteBusNumber && index !== editRouteIndex
                        );
            
                        if (duplicateRouteBus) {
                            alert('Route Bus Number already exists. Please use unique values!');
                            return;
                        }
            
                        const newRoute = {
                            routeBusNumber: newRouteBusNumber,
                            routeStartingPoint: document.getElementById('routeStartingPoint').value.trim(),
                            routeDriverName: document.getElementById('routeDriverName').value.trim(),
                            driverMobileNumber: +document.getElementById('driverMobileNumber').value.trim(),
                            routeBusRoute: document.getElementById('routeBusRoute').value.trim(),
                        };
            
                        if (editRouteMode) {
                            busRouteData[editRouteIndex] = newRoute;
                        } else {
                            busRouteData.push(newRoute);
                        }
            
                        saveToRouteLocalStorage();
                        renderBusRouteTable(busRouteData);
                        $('#routeModal').modal('hide');
                    });
            
                    function editBusRoute(index) {
                        const route = busRouteData[index];
                        document.getElementById('routeBusNumber').value = route.routeBusNumber;
                        document.getElementById('routeStartingPoint').value = route.routeStartingPoint;
                        document.getElementById('routeDriverName').value = route.routeDriverName;
                        document.getElementById('driverMobileNumber').value = route.driverMobileNumber;
                        document.getElementById('routeBusRoute').value = route.routeBusRoute;
                        editRouteMode = true;
                        editRouteIndex = index;
                        $('#routeModal').modal('show');
                    }
            
                    function deleteBusRoute(index) {
                        if (confirm('Are you sure you want to delete this bus route?')) {
                            busRouteData.splice(index, 1);
                            saveToRouteLocalStorage();
                            renderBusRouteTable(busRouteData);
                        }
                    }
            
                    document.getElementById('searchRouteBar').addEventListener('input', function() {
                        const searchValue = this.value.toLowerCase().trim();
                        const filteredData = busRouteData.filter(route => 
                            route.routeBusNumber.toLowerCase().includes(searchValue)
                        );
                        renderBusRouteTable(filteredData);
                    });
            
                    renderBusRouteTable(busRouteData);
                </script>
            </body>
            </html>
            
        </div>


        <div id="studentDetails" class="section">
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Student Details</title>
                <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
                <style>
                    body { display: flex; }
                    .sidebar { width: 200px; background-color: #f8f9fa; min-height: 100vh; padding: 20px; }
                    .content { flex: 1; padding: 20px; }
                    .header { background-color: #ff6600; color: white; padding: 10px; font-size: 20px; margin-bottom: 10px; }
                    .btn-add { background-color: #ff6600; color: white; }
                    .table th, .table td { vertical-align: middle; text-align: center; }
                </style>
            </head>
            <body>
                
                    <div class="container">
                        <div class="header">Student Details</div>
                        <button class="btn btn-add mb-3" id="addStudentBtn">+ Add Student</button>
                        <input type="text" id="searchStudentBar" class="form-control mb-3" placeholder="Search by Roll Number">
                        <table class="table table-bordered table-striped">
                            <thead>
                                <tr>
                                    <th>Serial No.</th>
                                    <th>Name</th>
                                    <th>Roll Number</th>
                                    <th>Bus Number</th>
                                    <th>Bus Route</th>
                                    <th>Branch</th>
                                    <th>Status (Fee)</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="studentTableBody"></tbody>
                        </table>
                    </div>
            
            
                <!-- Add/Edit Modal -->
                <div class="modal" tabindex="-1" role="dialog" id="studentModal">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Add/Edit Student</h5>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <form id="studentForm">
                                    <input type="hidden" id="studentIndex">
                                    <div class="form-group">
                                        <label>Name</label>
                                        <input type="text" id="studentName" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Roll Number</label>
                                        <input type="text" id="studentRoll" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Bus Number</label>
                                        <input type="text" id="studentBus" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Bus Route</label>
                                        <input type="text" id="studentRoute" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Branch</label>
                                        <input type="text" id="studentBranch" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Phone Number</label>
                                        <input type="text" id="studentPhone" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Photo</label>
                                        <input type="file" id="studentPhoto" class="form-control-file">
                                    </div>
                                    <div class="form-group">
                                        <label>Status (Fee Paid/Unpaid)</label>
                                        <select id="studentStatus" class="form-control">
                                            <option value="Paid">Paid</option>
                                            <option value="Unpaid">Unpaid</option>
                                        </select>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-success" id="saveStudentBtn">Save</button>
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            
                <!-- View Modal -->
                <div class="modal" tabindex="-1" role="dialog" id="viewModal">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Student Details</h5>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>
                            <div class="modal-body" id="viewContent"></div>
                        </div>
                    </div>
                </div>
            
                <script>
                    let students = JSON.parse(localStorage.getItem('students')) || [];
            
                    const saveData = () => localStorage.setItem('students', JSON.stringify(students));
            
                    const renderTable = () => {
                        const tbody = document.getElementById('studentTableBody');
                        tbody.innerHTML = '';
                        students.forEach((s, i) => {
                            tbody.innerHTML += `
                                <tr>
                                    <td>${i + 1}</td>
                                    <td>${s.name}</td>
                                    <td>${s.roll}</td>
                                    <td>${s.busNumber}</td>
                                    <td>${s.busRoute}</td>
                                    <td>${s.branch}</td>
                                    <td>${s.status}</td>
                                    <td>
                                        <button class="btn btn-warning btn-sm" onclick="editStudent(${i})">Edit</button>
                                        <button class="btn btn-primary btn-sm" onclick="viewStudent(${i})">View</button>
                                        <button class="btn btn-danger btn-sm" onclick="deleteStudent(${i})">Delete</button>
                                    </td>
                                </tr>`;
                        });
                    };
            
                    document.getElementById('addStudentBtn').onclick = () => {
                        document.getElementById('studentForm').reset();
                        document.getElementById('studentIndex').value = '';
                        $('#studentModal').modal('show');
                    };
            
                    document.getElementById('saveStudentBtn').onclick = () => {
                        const name = document.getElementById('studentName').value;
                        const roll = document.getElementById('studentRoll').value;
                        const busNumber = document.getElementById('studentBus').value;
                        const busRoute = document.getElementById('studentRoute').value;
                        const branch = document.getElementById('studentBranch').value;
                        const phone = document.getElementById('studentPhone').value;
                        const photo = document.getElementById('studentPhoto').files[0];
                        const status = document.getElementById('studentStatus').value;
            
                        if (students.find((s, idx) => s.roll === roll && idx != document.getElementById('studentIndex').value)) {
                            alert("Duplicate Roll Number not allowed!");
                            return;
                        }
            
                        const photoURL = photo ? URL.createObjectURL(photo) : '';
                        const student = { name, roll, busNumber, busRoute, branch, phone, status, photo: photoURL };
            
                        const index = document.getElementById('studentIndex').value;
                        if (index) students[index] = student;
                        else students.push(student);
            
                        saveData();
                        renderTable();
                        $('#studentModal').modal('hide');
                    };
            
                    const editStudent = (i) => {
                        const s = students[i];
                        document.getElementById('studentName').value = s.name;
                        document.getElementById('studentRoll').value = s.roll;
                        document.getElementById('studentBus').value = s.busNumber;
                        document.getElementById('studentRoute').value = s.busRoute;
                        document.getElementById('studentBranch').value = s.branch;
                        document.getElementById('studentPhone').value = s.phone;
                        document.getElementById('studentIndex').value = i;
                        $('#studentModal').modal('show');
                    };
            
                    const viewStudent = (i) => {
                        const s = students[i];
                        document.getElementById('viewContent').innerHTML = `
                            <p><strong>Name:</strong> ${s.name}</p>
                            <p><strong>Phone:</strong> ${s.phone}</p>
                            ${s.photo ? `<img src="${s.photo}" width="100%">` : ''}
                        `;
                        $('#viewModal').modal('show');
                    };
            
                    const deleteStudent = (i) => {
                        if (confirm('Are you sure?')) {
                            students.splice(i, 1);
                            saveData();
                            renderTable();
                        }
                    };
            
                    document.getElementById('searchStudentBar').oninput = function () {
                        const query = this.value.toLowerCase();
                        const filtered = students.filter(s => s.roll.includes(query));
                        document.getElementById('studentTableBody').innerHTML = '';
                        filtered.forEach((s, i) => {
                            document.getElementById('studentTableBody').innerHTML += `
                                <tr>
                                    <td>${i + 1}</td>
                                    <td>${s.name}</td>
                                    <td>${s.roll}</td>
                                    <td>${s.busNumber}</td>
                                    <td>${s.busRoute}</td>
                                    <td>${s.branch}</td>
                                    <td>${s.status}</td>
                                </tr>`;
                        });
                    };
            
                    renderTable();
                </script>
            
                <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
                <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
            </body>
            </html>
            
            
        </div>
            


        <div id="facultyDetails" class="section">
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Faculty Details</title>
                <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
                <link
                href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
                rel="stylesheet"
                />
                <style>
                    * {
                        margin: 0;
                        padding: 0;
                        box-sizing: border-box;
                        font-family: Arial, sans-serif;
                    }
            
                    /* Sidebar Styling */
                    .sidebar {
                        background-color: #ff6600; /* Orange color */
                        width: 200px;
                        height: 100vh; /* Full viewport height */
                        position: fixed; /* Sticks to the side */
                        top: 0;
                        left: 0;
                        color: #fff;
                        padding: 20px 0;
                        overflow-y: auto; /* Scrollable if needed */
                    }
            
                    .sidebar h2 {
                        text-align: center;
                        font-size: 22px;
                        margin-bottom: 20px;
                        text-transform: uppercase;
                        color: #fff;
                        font-weight: bold;
                    }
            
                    .sidebar ul {
                        list-style: none;
                        padding: 0;
                    }
            
                    .sidebar ul li {
                        margin: 15px 0;
                    }
            
                    .sidebar ul li a {
                        display: block;
                        text-decoration: none;
                        color: #fff;
                        padding: 10px 20px;
                        font-size: 16px;
                        border-radius: 5px;
                        transition: background 0.3s;
                    }
            
                    .sidebar ul li a:hover,
                    .sidebar ul li.active a {
                        background-color: #e55c00; /* Darker orange on hover/active */
                        color: #fff;
                    }
            
                    .content {
                        margin-left: 210px;
                        padding: 20px;
                    }
                    .header {
                        background-color: #f96332;
                        color: white;
                        padding: 10px;
                        font-size: 15px;
                        margin-bottom: 14px;
                    }
                    .btn-add {
                        background-color: #f96332;
                        color: white;
                        margin-bottom: 14px;
                    }
                    .btn-save {
                        background-color: green;
                        color: white;
                    }
                    .btn-cancel {
                        background-color: red;
                        color: white;
                    }
                    .btn-edit, .btn-view, .btn-delete {
                        margin: 0 2px;
                    }
            
                    .table th, .table td {
                        vertical-align: middle;
                    }
                </style>
            </head>
            <body>
                
                    <div class="header">Faculty Details</div>
                    <div class="table-container">
                        <button class="btn btn-add" id="addFacultyBtn">+ Add Faculty</button>
                        <input type="text" id="searchFacultyBar" class="form-control" placeholder="Search by Faculty ID or Name">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>Serial No.</th>
                                    <th>Faculty Name</th>
                                    <th>Phone Number</th>
                                    <th>Bus Route</th>
                                    <th>Faculty ID</th>
                                    <th>Email</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="facultyTableBody"></tbody>
                        </table>
                    </div>
                
            
                <!-- Add/Edit Modal -->
                <div class="modal" tabindex="-1" role="dialog" id="facultyModal">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="modalTitle">Edit Faculty Details</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <form id="facultyForm">
                                    <div class="form-group">
                                        <label for="facultyName">Faculty Name</label>
                                        <input type="text" class="form-control" id="facultyName" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="facultyPhoneNumber">Phone Number</label>
                                        <input type="text" class="form-control" id="facultyPhoneNumber" required pattern="\d+">
                                    </div>
                                    <div class="form-group">
                                        <label for="facultyBusRoute">Bus Route</label>
                                        <input type="text" class="form-control" id="facultyBusRoute" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="facultyId">Faculty ID</label>
                                        <input type="text" class="form-control" id="facultyId" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="facultyMailId">Email</label>
                                        <input type="email" class="form-control" id="facultyMailId" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="facultyPhoto">Upload Photo</label>
                                        <input type="file" class="form-control-file" id="facultyPhoto" accept="image/*">
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-save" id="saveFacultyBtn">Save</button>
                                <button type="button" class="btn btn-cancel" data-dismiss="modal">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            
                <!-- View Modal -->
                <div class="modal" tabindex="-1" role="dialog" id="viewModal">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Faculty Details</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body" id="viewContent"></div>
                        </div>
                    </div>
                </div>
            
                <script>
                    let facultyData = JSON.parse(localStorage.getItem('localFacultyStorage')) || [];
                    let editFacultyMode = false, editFacultyIndex = -1;
            
                    function renderFacultyTable() {
                        const tableBody = document.getElementById('facultyTableBody');
                        tableBody.innerHTML = '';
                        facultyData.forEach((faculty, index) => {
                            tableBody.insertAdjacentHTML('beforeend', `
                                <tr>
                                    <td>${index + 1}</td>
                                    <td>${faculty.facultyName}</td>
                                    <td>${faculty.facultyPhoneNumber}</td>
                                    <td>${faculty.facultyBusRoute}</td>
                                    <td>${faculty.facultyId}</td>
                                    <td>${faculty.facultyMailId}</td>
                                    <td>
                                        <button class="btn btn-primary btn-sm" onclick="editFaculty(${index})">Edit</button>
                                        <button class="btn btn-info btn-sm" onclick="viewFaculty(${index})">View</button>
                                        <button class="btn btn-danger btn-sm" onclick="deleteFaculty(${index})">Delete</button>
                                    </td>
                                </tr>
                            `);
                        });
                    }
            
                    document.getElementById('addFacultyBtn').onclick = () => {
                        editFacultyMode = false;
                        document.getElementById('facultyForm').reset();
                        $('#facultyModal').modal('show');
                    };
            
                    document.getElementById('saveFacultyBtn').onclick = () => {
                        const form = document.getElementById('facultyForm');
                        const newFaculty = {
                            facultyName: facultyName.value,
                            facultyPhoneNumber: facultyPhoneNumber.value,
                            facultyBusRoute: facultyBusRoute.value,
                            facultyId: facultyId.value,
                            facultyMailId: facultyMailId.value,
                        };
            
                        if (editFacultyMode) facultyData[editFacultyIndex] = newFaculty;
                        else facultyData.push(newFaculty);
            
                        localStorage.setItem('localFacultyStorage', JSON.stringify(facultyData));
                        renderFacultyTable();
                        $('#facultyModal').modal('hide');
                    };
            
                    function viewFaculty(index) {
                        const faculty = facultyData[index];
                        const content = `
                            <p><strong>Name:</strong> ${faculty.facultyName}</p>
                            <p><strong>Phone:</strong> ${faculty.facultyPhoneNumber}</p>
                            <p><strong>Email:</strong> ${faculty.facultyMailId}</p>
                            <p><strong>Bus Route:</strong> ${faculty.facultyBusRoute}</p>
                            <p><strong>Faculty ID:</strong> ${faculty.facultyId}</p>`;
                        document.getElementById('viewContent').innerHTML = content;
                        $('#viewModal').modal('show');
                    }
            
                    function deleteFaculty(index) {
                        facultyData.splice(index, 1);
                        localStorage.setItem('localFacultyStorage', JSON.stringify(facultyData));
                        renderFacultyTable();
                    }
            
                    function editFaculty(index) {
                        const faculty = facultyData[index];
                        editFacultyMode = true;
                        editFacultyIndex = index;
                        Object.keys(faculty).forEach(key => {
                            document.getElementById(key).value = faculty[key];
                        });
                        $('#facultyModal').modal('show');
                    }
            
                    renderFacultyTable();
                </script>
                <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
                <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
            </body>
            </html>
            
        </div>


        <div id="trackBus" class="section">
            <h2>Track Bus</h2>
            <p>Manage and view Bus Routes here.</p>
        </div>


        <div id="settings" class="section">
            <h2>Settings</h2>
            <p>Manage and view Bus Routes here.</p>
        </div>


        <div id="seatPlan" class="section">
            <h2>Seat Plan</h2>
            <p>Configure seat plans for buses here.</p>
        </div>


        <div id="busTiming" class="section">
            <h2>Bus Timing</h2>
            <p>View and update bus schedules here.</p>
        </div>


        <div id="logout" class="section">
            <h2>Logout</h2>
            <p>View and update bus schedules here.</p>
        </div>
    </div>

    <!-- JavaScript Side bar-->
    <script>
        function showSection(sectionId, element) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });

            // Show the selected section
            document.getElementById(sectionId).classList.add('active');

            // Update sidebar active state
            document.querySelectorAll('.sidebar a').forEach(link => {
                link.classList.remove('active');
            });
            element.classList.add('active');
        }
        
    </script>

</body>
</html>